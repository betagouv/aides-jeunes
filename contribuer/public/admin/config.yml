locale: fr
backend:
  name: git-gateway
  branch: master
  commit_messages:
    create: Crée {{slug}}
    update: Met à jour {{slug}}
    delete: Supprime {{slug}}
    uploadMedia: Nouvelle image {{path}}
    deleteMedia: Suppression de l'image {{path}}

media_folder: public/img
public_folder: img

# local_backend: true
publish_mode: editorial_workflow

root: ../../..

fields:
  field_boolean: &field_boolean
    widget: object
    fields:
      - label: Valeur
        name: value
        widget: boolean
  field_number: &field_number
    widget: object
    fields:
      - label: Opérateur
        name: operator
        widget: select
        options:
          - label: Supérieur à
            value: ">"
          - label: Supérieur ou égal à
            value: ">="
          - label: Égal à
            value: "="
          - label: Inférieur à
            value: "<"
          - label: Inférieur ou égal à
            value: "<="
      - label: Valeur
        name: value
        widget: number
  field_age: &field_age
    <<: *field_number
    label: Age
    name: age
  field_regions: &field_regions
    label: Condition géographique régionale
    name: regions
    widget: object
    fields:
      - label: Régions
        name: values
        widget: select
        multiple: true
        options:
          - label: Auvergne-Rhône-Alpes
            value: "84"
          - label: Bourgogne-Franche-Comté
            value: "27"
          - label: Bretagne
            value: "53"
          - label: Centre-Val de Loire
            value: "24"
          - label: Grand Est
            value: "44"
          - label: Hauts-de-France
            value: "32"
          - label: Île-de-France
            value: "11"
          - label: Normandie
            value: "28"
          - label: Nouvelle-Aquitaine
            value: "75"
          - label: Occitanie
            value: "76"
          - label: Pays de la Loire
            value: "52"
          - label: Provence-Alpes-Côte d'Azur
            value: "93"
  field_departements: &field_departements
    label: Condition géographique départementale
    name: departements
    widget: object
    fields:
      - label: Code des départements
        name: values
        widget: list
        hint: Pour saisir plusieurs département, séparez les codes des départements par une virgule.
  field_communes: &field_communes
    label: Condition géographique communale
    name: communes
    widget: object
    fields:
      - label: Code INSEE des communes
        name: values
        widget: list
        hint: Pour saisir plusieurs communes, séparez les codes INSEE des communes par une virgule.
  field_boursier: &field_boursier
    <<: *field_boolean
    label: Boursier
    name: boursier
  field_mention_baccalaureat: &field_mention_baccalaureat
    label: Mention au bac
    name: mention_baccalaureat
    widget: object
    fields:
      - label: Valeurs
        name: values
        widget: select
        multiple: true
        options:
          - label: Mention assez bien
            value: mention_assez_bien
          - label: Mention bien
            value: mention_bien
          - label: Mention très bien
            value: mention_tres_bien
          - label: Mention très bien avec félicitations du jury
            value: mention_tres_bien_felicitations_jury
          - label: Autre
            value: non_renseignee
  field_select_regime_securite_sociale: &field_select_regime_securite_sociale
    widget: select
    multiple: true
    required: false
    options:
      - label: Régime général
        value: regime_general
      - label: Régime agricole
        value: regime_agricole
      - label: Autres régimes
        value: autres_regimes
  field_regime_securite_sociale: &field_regime_securite_sociale
    label: Régime de sécurité sociale
    name: regime_securite_sociale
    widget: object
    fields:
      - <<: *field_select_regime_securite_sociale
        label: Inclus
        name: includes
      - <<: *field_select_regime_securite_sociale
        label: Exclus
        name: excludes
  # common fields
  field_nom_aide: &field_nom_aide
    label: Nom de l'aide
    name: label
    widget: string
  field_institution: &field_institution
    label: Institution
    name: institution
    widget: relation
    collection: institutions
    value_field: "{{slug}}"
    display_fields: ["{{name}}"]
    search_fields: [slug, name]
    allow_multiple: false
  field_description: &field_description
    label: Courte description
    name: description
    widget: description
    pattern: ["", ""]
  field_conditions_non_prise_en_compte: &field_conditions_non_prise_en_compte
    label: Conditions non prises en compte par le simulateur
    label_singular: Condition non prise en compte par le simulateur
    hint: |
      Certains critères d'éligibilité ne peuvent pas être demandés (trop précis)
      ni pris en compte (trop complexe) dans le cadre d'un simulateur grand public.
      Cette liste permet d'informer les usagers sur ces critères supplémentaires.
      Par exemple : Signer un contrat d’engagement réciproque (CER) avec votre département
      ou un Projet Personnalisé d’Accès à l’Emploi (PPAE) avec Pôle emploi.
    name: conditions
    widget: list
    collapsed: false
    field:
      label: Texte
      name: text
      widget: text
  field_lien_plus_informations: &field_lien_plus_informations
    label: Lien vers la page d'informations de référence
    hint: Vers un site institutionnel de préférence (par exemple, pour les aides nationales il s'agit souvent de service-public.fr)
    name: link
    widget: string
  field_lien_instructions: &field_lien_instructions
    label: Lien vers des instructions à suivre
    name: instructions
    widget: string
    required: false
  field_lien_formulaire: &field_lien_formulaire
    label: Lien vers un formulaire à imprimer
    name: form
    widget: string
    required: false
  field_lien_teleservice: &field_lien_teleservice
    label: Lien vers un téléservice
    hint: Lorsqu'il y a la possibilité de faire la démarche en ligne.
    name: teleservice
    widget: string
    required: false
  field_article_defini: &field_article_defini
    label: Article défini
    name: prefix
    hint: |
      Pour permet la formation de phrase grammaticalement correcte.
      Il s'agit d'indiquer le texte à insérer à la place de PPPP dans la phrase suivante dans laquelle AAAA correspondant au nom de l'aide :
      Comment obtenir PPPP AAAA ? Par exemples dans « Comment obtenir l'aide exceptionnelle ? » « l' » est le préfix. Pour « Comment obtenir les aides au logement ? » le préfix est « les ».
    widget: select
    required: false
    options: [le, la, les, l’, une, l’aide]
  field_type_resultat: &field_type_resultat
    label: Type du résultat
    name: type
    default: "bool"
    widget: select
    options:
      - label: Valeur numérique
        value: float
      - label: Éligibilité (Oui / Non)
        value: bool
  field_unite_resultat: &field_unite_resultat
    label: Unité lorsque le type de résultat est un montant
    hint: Il s'agit de spécifier l'unité du montant.
    name: unit
    widget: select
    default: €
    required: false
    options:
      - label: €
        value: €
      - label: "%"
        value: "%"
      - label: séances
        value: séances
  field_legende_montant: &field_legende_montant
    label: Légende asssociée au montant
    hint: Cette légende permet d'ajouter des informations complémentaires sur le montant. Cette légende correspond à « séances » dans l'affichage « N séances » et à « au lieu x de 0,5% dans « 1% au lieu de 0,5% ».
    name: legend
    widget: string
    required: false
  field_fiabilite_montant: &field_fiabilite_montant
    label: Niveau de fiabilité lorsque le résultat est un montant
    name: floorAt
    widget: select
    required: false
    options:
      - label: 10 (pour arrondir à la dizaine inférieure)
        value: 10
      - label: 1 (pour l'euro inférieur)
        value: 1
      - label: 0.01 (pour éviter l'arrondi)
        value: 0.01
  field_interet_particulier: &field_interet_particulier
    label: Faut-il limiter l'affichage de l'aide en fonction d'un intérêt particulier ?
    name: interestFlag
    hint: |
      En fin de parcours, des questions sont posées pour connaitre certains intérêts des usagers.
      Cela permet d'éviter d'afficher certaines aides qui ne seraient pas pertinentes pour les usagers.
    widget: select
    required: false
    options:
      - label: Oui, l'afficher en cas d'intérêt pour le BAFA ou le BAFD.
        value: _interetBafa
      - label: Oui, l'afficher en cas d'intérêt pour passer le permis de conduire.
        value: _interetPermisDeConduire
      - label: Oui, l'afficher en cas d'intérêt pour faires des études à l'étranger.
        value: _interetEtudesEtranger
  field_entite_rattachement_openfisca: &field_entite_rattachement_openfisca
    label: Entité de rattachement de la variable dans OpenFisca
    name: entity
    widget: select
    hint: Cette variable fait le lien avec le moteur de calculs. Tant que vous ne savez pas quoi y indiquer, nous recommandons de laisser Ménage.
    options:
      - label: Famille
        value: familles
      - label: Foyer Fiscal
        value: foyers_fiscaux
      - label: Individu
        value: individus
      - label: Ménage
        value: menages
  field_montant_maximal_aide: &field_montant_maximal_aide
    label: Montant maximal de l'aide
    name: montant
    widget: number
    required: false
  field_periodicite_montant_aide: &field_periodicite_montant_aide
    label: "Périodicité du montant de l'aide"
    name: periodicite
    widget: select
    hint: Cette variable permet de définir la période de versement du montant de l'aide.
    required: false
    options:
      - label: Ponctuelle
        value: ponctuelle
      - label: Mensuelle (/ mois)
        value: mensuelle
      - label: Annuelle (/ an)
        value: annuelle
      - label: Autre
        value: autre
  field_profil_eligibilite: &field_profil_eligibilite
    label: Profils d'éligibilité
    label_singular: profil d'éligibilité
    name: profils
    widget: list
    collapsed: false
    default: []
    types:
      - label: Lycéen
        name: lyceen
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
              - *field_boursier
              - label: Année d'étude
                name: annee_etude
                widget: object
                fields:
                  - label: Valeurs
                    name: values
                    widget: select
                    multiple: true
                    options:
                      - label: CAP - 1ère année
                        value: cap_1
                      - label: CAP - 2ème année
                        value: cap_2
                      - label: Seconde
                        value: seconde
                      - label: Première
                        value: premiere
                      - label: Terminale
                        value: terminale
                      - label: Autre
                        value: autre
      - label: Dans l'enseignement supérieur
        name: enseignement_superieur
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
              - *field_boursier
              - *field_mention_baccalaureat
              - label: Année d'étude
                name: annee_etude
                widget: object
                fields:
                  - label: Valeurs
                    name: values
                    widget: select
                    multiple: true
                    options:
                      - label: BTS
                        value: bts_1
                      - label: BUT
                        value: but_1
                      - label: CPGE
                        value: cpge_1
                      - label: Licence - 1ère année
                        value: licence_1
                      - label: Licence - 2ème année
                        value: licence_2
                      - label: Licence - 3ème année
                        value: licence_3
                      - label: Master - 1ère année
                        value: master_1
                      - label: Master - 2ème année
                        value: master_2
                      - label: Doctorat - 1ère année
                        value: doctorat_1
                      - label: Doctorat - 2ème année
                        value: doctorat_2
                      - label: Doctorat - 3ème année
                        value: doctorat_3
                      - label: Autre
                        value: autre
      - label: Scolarisé
        name: etudiant
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
              - label: Année d'étude
                name: annee_etude
                widget: object
                fields:
                  - label: Valeurs
                    name: values
                    widget: select
                    multiple: true
                    options:
                      - label: CAP - 1ère année
                        value: cap_1
                      - label: CAP - 2ème année
                        value: cap_2
                      - label: Seconde
                        value: seconde
                      - label: Première
                        value: premiere
                      - label: Terminale
                        value: terminale
                      - label: BTS
                        value: bts_1
                      - label: BUT
                        value: but_1
                      - label: CPGE
                        value: cpge_1
                      - label: Licence - 1ère année
                        value: licence_1
                      - label: Licence - 2ème année
                        value: licence_2
                      - label: Licence - 3ème année
                        value: licence_3
                      - label: Master - 1ère année
                        value: master_1
                      - label: Master - 2ème année
                        value: master_2
                      - label: Doctorat - 1ère année
                        value: doctorat_1
                      - label: Doctorat - 2ème année
                        value: doctorat_2
                      - label: Doctorat - 3ème année
                        value: doctorat_3
                      - label: Autre
                        value: autre
      - label: Stagiaire
        name: stagiaire
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
              - *field_boursier
      - label: Apprenti
        name: apprenti
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
              - *field_boursier
      - label: En contrat de professionnalisation
        name: professionnalisation
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
      - label: En recherche d'emploi
        name: chomeur
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
      - label: Salarié
        name: salarie
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
      - label: Travailleur indépendant
        name: independant
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
      - label: En service civique
        name: service_civique
        widget: object
        fields:
          - label: Conditions à satisfaire simultanément
            label_singular: Condition à satisfaire
            name: conditions
            default: []
            widget: list
            collapsed: false
            types:
              - *field_age
  # champs propre aux aides javascript
  field_conditions_generales: &field_conditions_generales
    label: Conditions générales à satisfaire simultanément
    label_singular: Condition générale à satisfaire
    name: conditions_generales
    default: []
    widget: list
    collapsed: false
    types:
      - *field_age
      - *field_regions
      - *field_departements
      - *field_communes
      - *field_regime_securite_sociale
    field_references: &field_references
      label: Liens des sources de référence
      name: references
      widget: list
      hint: Pour saisir plusieurs références, séparez les références par une virgule.
      required: false

collections:
  - name: benefits_javascript
    label: Aides avec critères d'éligibilités
    label_singular: Aide avec critères d'éligibilités
    identifier_field: label
    folder: "data/benefits/javascript"
    create: true
    delete: false
    editor:
      preview: true
    slug: "{{fields.institution}}-{{label}}"
    summary: "{{label}} ({{fields.institution}})"
    extension: yml
    fields:
      - *field_nom_aide
      - *field_institution
      - *field_description
      - *field_conditions_non_prise_en_compte
      - *field_conditions_generales
      - *field_profil_eligibilite
      - *field_lien_plus_informations
      - *field_lien_teleservice
      - *field_lien_formulaire
      - *field_lien_instructions
      - *field_article_defini
      - *field_type_resultat
      - *field_unite_resultat
      - *field_periodicite_montant_aide
      - *field_legende_montant
      - *field_montant_maximal_aide
      - *field_interet_particulier
      - *field_references
  - name: benefits_openfisca
    label: Aides complexes
    label_singular: Aide complexe
    identifier_field: label
    folder: "data/benefits/openfisca"
    create: true
    delete: false
    editor:
      preview: true
    slug: "{{label}}"
    extension: yml
    fields:
      - *field_nom_aide
      - *field_institution
      - *field_description
      - *field_conditions_non_prise_en_compte
      - *field_lien_plus_informations
      - *field_lien_teleservice
      - *field_lien_formulaire
      - *field_lien_instructions
      - *field_article_defini
      - *field_type_resultat
      - *field_unite_resultat
      - *field_periodicite_montant_aide
      - *field_legende_montant
      - *field_fiabilite_montant
      - *field_interet_particulier
      - *field_entite_rattachement_openfisca
  - name: institutions
    label: Institutions
    label_singular: institution
    identifier_field: name
    folder: "data/institutions"
    create: true
    delete: false
    editor:
      preview: false
    slug: "{{name}}"
    extension: yml
    fields:
      - label: Nom de votre institution
        hint: Département de la Gironde, Ville de Canéjan, Mauges Communauté, etc.
        name: name
        widget: string
      - label: Logo
        name: imgSrc
        widget: image
        allow_multiple: false
      - label: Institution nationale
        name: national
        widget: boolean
        required: false
  - name: contribution-pages
    label: Pages
    label_singular: page
    create: true
    delete: false
    files:
      - label: Accueil
        name: accueil
        file: "contribuer/content/home.md"
        fields:
          - { label: Titre, name: title, widget: string }
          - { label: Corps, name: body, widget: markdown }
          - label: Contributions
            name: categories
            widget: list
            fields:
              - { label: Nom, name: name, widget: string }
              - label: Idées
                name: ideas
                widget: list
                field: { label: Nom, name: name, widget: string }
  - name: tasks
    label: Contributions
    label_singular: contribution
    folder: "contribuer/content/tasks"
    create: true
    delete: false
    slug: "{{slug}}"
    fields:
      - { label: Nom, name: title, widget: string }
      - {
          label: Description,
          name: "body",
          widget: "markdown",
          required: false,
        }
